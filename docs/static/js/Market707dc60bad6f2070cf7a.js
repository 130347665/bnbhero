(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{445:function(e,t,n){"use strict";t.a=[{name:"Tier 1-1",success:70,hploss:200,exp:100,reward:.0033},{name:"Tier 1-2",success:67,hploss:200,exp:110,reward:.00396},{name:"Tier 1-3",success:63,hploss:200,exp:120,reward:.0462},{name:"Tier 2-1",success:59,hploss:200,exp:130,reward:.00528},{name:"Tier 2-2",success:55,hploss:200,exp:150,reward:.00594},{name:"Tier 2-3",success:51,hploss:200,exp:200,reward:.0066},{name:"Boss 1",success:28,hploss:400,exp:400,reward:.0242}]},454:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return d}));var a=n(478),i=n.n(a),r=n(445),s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var s,p=e[Symbol.iterator]();!(a=(s=p.next()).done)&&(n.push(s.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&p.return&&p.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},p=function(e){return i.a.encode(e)},u=function(e){return i.a.decode(e)},y=function(e){try{return JSON.parse(e)}catch(e){return""}},l=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];localStorage[p(e)]=p(n?JSON.stringify(t):t)},o=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=localStorage[p(e)];if(n)try{var a=u(n);return t?y(a):a}catch(e){return""}return""},c=function(e){var t,n=e.card,a=e.build,i=(e.gas,s(n,4)),r=i[0],p=i[1],u=i[2],y=i[3],l=s(a,4),o=l[0],c=l[1],d=l[2],m=l[3],f=2==+(t=o)?30:3==+t?60:4==+t?140:0,T=function(e){return 2==+e?3:3==+e?6:4==+e?16:0}(c),b=function(e){return 2==+e?-5:3==+e?-12:4==+e?-28:0}(d),h=86.4*(100+b)/100;return{buildData:{attr:f,reward:T,exp:function(e){return 2==+e?30:3==+e?60:4==+e?90:0}(m),dishp:b},cardData:{vatk:10*(r-1)+p+f,vdef:10*(r-1)+u+f,vagi:10*(r-1)+y+f,hpcd:h,everyDayHp:(86400/h).strip(4)}}},d=function(e){var t=e.cardData,n=e.buildData,a=e.gas,i=t.vatk,s=t.vdef,p=t.vagi,u=t.everyDayHp,y=n.reward,l=n.exp;return r.a.map((function(e){var t=e.name,n=e.success,r=e.hploss,o=e.exp,c=e.reward,d=n+i/100,m=c*(100+y)/100,f=m+p*m/1e3,T=r-s/10,b=u/(((100-d)*r+d*T)/100),h=d/100*(o+l),v=Math.ceil(b*h),g=(b*(d/100*f-a)).strip(4);return{name:t,successC:d,rewardC:f.strip(8),hplossC:T,everyXp:v,everyRewrad:g}}))}},508:function(e,t,n){"use strict";t.a=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"CancelledListing",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bnbPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bnbhPrice",type:"uint256"}],name:"ListingPriceChange",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bnbPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bnbhPrice",type:"uint256"}],name:"NewListing",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bnbPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"bnbhPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tax",type:"uint256"}],name:"PurchaseListing",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"previousAdminRole",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"newAdminRole",type:"bytes32"}],name:"RoleAdminChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"role",type:"bytes32"},{indexed:!0,internalType:"address",name:"account",type:"address"},{indexed:!0,internalType:"address",name:"sender",type:"address"}],name:"RoleRevoked",type:"event"},{inputs:[],name:"DEFAULT_ADMIN_ROLE",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"bannedList",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"bnbhToken",outputs:[{internalType:"contract IBEP20",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"characters",outputs:[{internalType:"contract IBNBHCharacter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"excludeFromTax",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"}],name:"getRoleAdmin",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"grantRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"hasRole",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"lastTransferredTimes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"maintenanceMode",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"minimumPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"priceOracle",outputs:[{internalType:"contract IPriceOracle",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"renounceRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"role",type:"bytes32"},{internalType:"address",name:"account",type:"address"}],name:"revokeRole",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"taxFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"taxFeeRecepient",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IBEP20",name:"_bnbhToken",type:"address"},{internalType:"contract IBNBHCharacter",name:"_characters",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"migrateExcludeFromTax",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"removeBannedHeores",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"setTokenAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"character",type:"address"}],name:"setCharacterAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"mode",type:"bool"}],name:"setmaintenanceMode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"fee",type:"uint256"}],name:"setTaxFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"setTaxFeeRecepient",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"oracle",type:"address"}],name:"setPriceOracle",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"setMinimumPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"bool",name:"state",type:"bool"}],name:"setBannedAccount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_limit",type:"uint256"},{internalType:"uint256",name:"_pageNumber",type:"uint256"}],name:"getCharacterListingIDsPage",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_limit",type:"uint256"},{internalType:"uint256",name:"_pageNumber",type:"uint256"}],name:"getCharactersForPage",outputs:[{components:[{internalType:"uint256",name:"name",type:"uint256"},{internalType:"uint256",name:"heroType",type:"uint256"},{internalType:"uint256",name:"xp",type:"uint256"},{internalType:"uint256",name:"attack",type:"uint256"},{internalType:"uint256",name:"armor",type:"uint256"},{internalType:"uint256",name:"speed",type:"uint256"},{internalType:"uint256",name:"hp",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"seller",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"heroClass",type:"uint256"}],internalType:"struct BNBHMarket.MarketHero[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllTokenIds",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"seller",type:"address"}],name:"getCharactersForSeller",outputs:[{components:[{internalType:"uint256",name:"name",type:"uint256"},{internalType:"uint256",name:"heroType",type:"uint256"},{internalType:"uint256",name:"xp",type:"uint256"},{internalType:"uint256",name:"attack",type:"uint256"},{internalType:"uint256",name:"armor",type:"uint256"},{internalType:"uint256",name:"speed",type:"uint256"},{internalType:"uint256",name:"hp",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"seller",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"heroClass",type:"uint256"}],internalType:"struct BNBHMarket.MarketHero[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_heroId",type:"uint256"}],name:"getCharacterDataById",outputs:[{components:[{internalType:"uint256",name:"name",type:"uint256"},{internalType:"uint256",name:"heroType",type:"uint256"},{internalType:"uint256",name:"xp",type:"uint256"},{internalType:"uint256",name:"attack",type:"uint256"},{internalType:"uint256",name:"armor",type:"uint256"},{internalType:"uint256",name:"speed",type:"uint256"},{internalType:"uint256",name:"hp",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"seller",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"heroClass",type:"uint256"}],internalType:"struct BNBHMarket.MarketHero",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256[]",name:"tokenIds",type:"uint256[]"}],name:"getCharacterDataByIds",outputs:[{components:[{internalType:"uint256",name:"name",type:"uint256"},{internalType:"uint256",name:"heroType",type:"uint256"},{internalType:"uint256",name:"xp",type:"uint256"},{internalType:"uint256",name:"attack",type:"uint256"},{internalType:"uint256",name:"armor",type:"uint256"},{internalType:"uint256",name:"speed",type:"uint256"},{internalType:"uint256",name:"hp",type:"uint256"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"seller",type:"address"},{internalType:"uint256",name:"price",type:"uint256"},{internalType:"uint256",name:"level",type:"uint256"},{internalType:"uint256",name:"heroClass",type:"uint256"}],internalType:"struct BNBHMarket.MarketHero[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getSellerOfNftID",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_seller",type:"address"}],name:"getNumberOfListingsBySeller",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_seller",type:"address"}],name:"getListingIDsBySeller",outputs:[{internalType:"uint256[]",name:"tokens",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNumberOfCharacterListings",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_heroId",type:"uint256"}],name:"canListOrChangePrice",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"uint256",name:"_price",type:"uint256"}],name:"addListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"uint256",name:"_newPrice",type:"uint256"}],name:"changeListingPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"cancelListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"purchaseListing",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"view",type:"function"}]},523:function(e,t){},525:function(e,t){},527:function(e,t){},531:function(e,t){},538:function(e,t){},539:function(e,t){},549:function(e,t){},550:function(e,t){},562:function(e,t){},563:function(e,t){},596:function(e,t){},598:function(e,t){},614:function(e,t,n){},897:function(e,t,n){"use strict";n(614)},904:function(e,t,n){"use strict";n.r(t);var a=n(519),i=n.n(a),r=n(508),s=n(454),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function a(i,r){try{var s=t[i](r),p=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(p).then((function(e){a("next",e)}),(function(e){a("throw",e)}));e(p)}("next")}))}}var y={name:"Market",data:function(){return{contract:"0x5CFFca0321b83dc873Bd2439aE7fEA10aE163fac",contractData:void 0,filterHero:Object(s.e)("filterHero")||"",filterMoney:Object(s.e)("filterMoney")||"",filterClass:Object(s.e)("filterClass")||"",filterType:Object(s.e)("filterType")||"",pageLimit:Object(s.e)("pageLimit")||200,listings:0,pages:1,columns:[{title:"編號 No.",key:"tokenId"},{title:"官方頁數 Page",key:"page"},{title:"名字 Name",key:"name"},{title:"職業 Class",key:"heroClass"},{title:"稀有度 Type",key:"heroType"},{title:"等級 Level",key:"level"},{title:"經驗 EXP",key:"xp"},{title:"價錢 Price",key:"price"}],data:[],typeObj:{1:"普通 Common",2:"罕見 Uncommon",3:"稀有 Rare",4:"史詩 Epic",5:"傳說 Legendary"},classObj:{1:"士兵 Soldier",2:"獵人 Hunter",3:"刺客 Rogue",4:"法師 Mage",5:"騎士 Knight"},isLoading:!0}},beforeMount:function(){var e=this;return u(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getWeb3();case 2:return n=t.sent,t.next=5,new n.eth.Contract(r.a,e.contract);case 5:e.contractData=t.sent,e.getCharactersForPage(1);case 7:case"end":return t.stop()}}),t,e)})))()},methods:{getCharactersForPage:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pages;return u(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.pages=t,e.isLoading=!0,n.prev=2,n.next=5,e.contractData.methods.getNumberOfCharacterListings().call();case 5:return e.listings=n.sent,e.listings=+e.listings,n.next=9,e.contractData.methods.getCharactersForPage(+e.pageLimit,t-1).call();case 9:a=n.sent,e.handleMarkData(a),e.isLoading=!1,n.next=18;break;case 14:n.prev=14,n.t0=n.catch(2),e.data=[],e.isLoading=!1;case 18:case"end":return n.stop()}}),n,e,[[2,14]])})))()},handlePageLimit:function(e){this.pageLimit=e,this.getCharactersForPage(1)},getWeb3:function(){var e,t=this;return new Promise((e=u(regeneratorRuntime.mark((function e(n,a){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new i.a(window.ethereum);try{n(r)}catch(e){a(e)}case 2:case"end":return e.stop()}}),e,t)}))),function(t,n){return e.apply(this,arguments)}))},handleMarkData:function(e){var t=this;this.data=e.map((function(e,n){var a=p({},e);a.price=(a.price/1e18).toFixed(3),a.priceText=a.price+" BNB",a.heroType=t.typeObj[a.heroType],a.heroClass=t.classObj[a.heroClass];var i=(t.pages-1)*t.pageLimit+n+1;return a.page=Math.ceil(i/12),a})),Object(s.f)("filterHero",this.filterHero),Object(s.f)("filterMoney",this.filterMoney),Object(s.f)("filterClass",this.filterClass),Object(s.f)("filterType",this.filterType),Object(s.f)("pageLimit",this.pageLimit)}},computed:{tableData:function(){var e=this;return this.filterHero||this.filterMoney||this.filterClass||this.filterType?this.data.filter((function(t){var n=t.name,a=t.heroClass,i=t.heroType,r=t.price;return(n.includes(e.filterHero)||!e.filterHero)&&(a.includes(e.filterClass)||!e.filterClass)&&(+e.filterMoney>+r||!e.filterMoney)&&(i.includes(e.filterType)||!e.filterType)})):this.data}}},l=(n(897),n(2)),o=Object(l.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("Row",[n("Col",{attrs:{span:"4"}},[n("Input",{attrs:{clearable:"",placeholder:"英雄"},model:{value:e.filterHero,callback:function(t){e.filterHero=t},expression:"filterHero"}})],1),e._v(" "),n("Col",{attrs:{span:"4"}},[n("Select",{attrs:{clearable:"",placeholder:"職業"},model:{value:e.filterClass,callback:function(t){e.filterClass=t},expression:"filterClass"}},e._l(e.classObj,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),e._v(" "),n("Col",{attrs:{span:"4"}},[n("Select",{attrs:{clearable:"",placeholder:"稀有度"},model:{value:e.filterType,callback:function(t){e.filterType=t},expression:"filterType"}},e._l(e.typeObj,(function(t){return n("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),e._v(" "),n("Col",{attrs:{span:"4"}},[n("Input",{attrs:{clearable:"",placeholder:"價格小於"},model:{value:e.filterMoney,callback:function(t){e.filterMoney=t},expression:"filterMoney"}})],1),e._v(" "),n("Col",{attrs:{span:"8"}},[n("Button",{attrs:{loading:e.isLoading,type:"success",long:"",icon:"ios-search"},on:{click:function(t){return e.getCharactersForPage()}}},[e._v("\n                    計算\n                ")])],1)],1),e._v(" "),n("Page",{attrs:{total:e.listings,"page-size":e.pageLimit,"show-sizer":"","page-size-opts":[10,20,50,200,400],"prev-text":"Previous","next-text":"Next"},on:{"on-change":e.getCharactersForPage,"on-page-size-change":e.handlePageLimit}}),e._v(" "),n("Table",{attrs:{columns:e.columns,data:e.tableData}})],1)}),[],!1,null,"2587fc76",null);t.default=o.exports}}]);
//# sourceMappingURL=Market707dc60bad6f2070cf7a.js.map